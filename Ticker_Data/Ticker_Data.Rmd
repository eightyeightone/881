---
title: "Collection of Methods for Gathering Stock Data"
author: "Harry Akeroyd"
date: "02/03/2021"
output:
  pdf_document: default
  html_document: default
---

### For Tesla: TSLA, as an example.
The code is made to be repeatable for any ticker.


**Libraries**

```{r echo=TRUE, results='hide', error=FALSE, warning=FALSE, message=FALSE}
library(quantmod)
library(stringr)     # String formatting.
library(highcharter) # Plotting.
library(ggplot2)     # Plotting.
run_time.start <- Sys.time()
```



**Data**

Assigning the trading period and taking stock price and volume data.

```{r}
trading_period.start <- "2020-01-01"

stock.ticker <- "TSLA"
stock.prices <- getSymbols.yahoo(stock.ticker, from=trading_period.start, auto.assign=FALSE)
colnames(stock.prices) <- str_remove(colnames(stock.prices), stock.ticker)
colnames(stock.prices) <- str_remove(colnames(stock.prices), ".")

#stock.open <- stock.prices$Open # Un-comment as required.
#stock.high <- stock.prices$High
#stock.low <- stock.prices$Low
#stock.close <- stock.prices$Close
#stock.volume <- stock.prices$V
stock.adj_close <- stock.prices$Adjusted # Or, stock.prices[,6]
print(summary(stock.adj_close))

```

The output (stock.prices) is a xts (eXtensible Time Series) file, which can be though of as a matrix with the power to manipulate the data as a function of time.

We can show, using the above, for the time period, `r trading_period.start` to `r  format(Sys.time(), '%Y-%m-%d')`.

We use adjusted close, which is: "*The adjusted closing price amends a stock's closing price to reflect that stock's value after accounting for any corporate actions. The closing price is the raw price, which is just the cash value of the last transacted price before the market closes.*"
Via: [Investopedia](https://www.investopedia.com/terms/a/adjusted_closing_price.asp#:~:text=The%20adjusted%20closing%20price%20amends,detailed%20analysis%20of%20past%20performance.)


**Graphing**

Box-whisker plot;
Calendar Heat Map;
Correlation Matrix;
Violin Chart.

Highcharter Plots.

#### Box-whisker Plot.

```{r}

```

#### Calendar Heat Map.

```{r}

```

#### Correlation Matrix.

```{r}

```

#### Violin Chart.

```{r}

```


#### Highcharter Plots.

```{r} 
#highchart(type = "stock") %>% hc_add_series(stock.adj_close) # Does not work for PDF.

#chartSeries(stock.adj_close, multi.col=TRUE, theme='black', TA="addBBands();addMACD()")
```





**Data Analysis and Summaries**

Key considerations for summarizing the data:

1. Centrality - where does the data converge?
2. Dispersion - where does the data disperse?
3. Replication - any instances or repetition?
4. Shape - what, over some index, does the data look like (normal distribution, etc.)?









**Program Run-Time**

```{r}
run_time.end <-Sys.time()
run_time.runtime <- run_time.end - run_time.start
run_time.runtime <- format(round(run_time.runtime, 3), nsmall = 3)
```

The above code has a run-time of `r run_time.runtime`.

Future work in commodities?

















